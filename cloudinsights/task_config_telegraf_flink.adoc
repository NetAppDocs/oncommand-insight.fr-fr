---
sidebar: sidebar 
permalink: task_config_telegraf_flink.html 
keywords: telegraf, installation, install, flink 
summary: Configuration du collecteur de données Flink 
---
= Collecteur de données Flink
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Cloud Insights utilise ce collecteur de données pour collecter des mesures de Flink.



== Installation

. Dans *observabilité > Collectors*, cliquez sur *+Data Collector*. Choisissez Flink.
+
Sélectionnez le système d'exploitation ou la plate-forme sur laquelle l'agent Telegraf est installé.

. Si vous n'avez pas déjà installé un agent pour la collecte ou si vous souhaitez installer un agent pour un autre système d'exploitation ou plate-forme, cliquez sur _Afficher les instructions_ pour développer le link:task_config_telegraf_agent.html["Installation de l'agent"] instructions.
. Sélectionnez la clé d'accès de l'agent à utiliser avec ce collecteur de données. Vous pouvez ajouter une nouvelle clé d'accès à l'agent en cliquant sur le bouton * + clé d'accès à l'agent*. Meilleure pratique : utilisez une clé d'accès d'agent différente uniquement lorsque vous souhaitez regrouper des collecteurs de données, par exemple, par OS/plate-forme.
. Suivez les étapes de configuration pour configurer le collecteur de données. Les instructions varient en fonction du type de système d'exploitation ou de plate-forme utilisé pour collecter des données.


image:FlinkDCConfigWindows.png["Configuration de la fonction encre"]



== Configuration

Un déploiement de Flink complet implique les composants suivants :

JobManager : système principal de Flink. Coordonne une série de gestionnaires de tâches. Dans une configuration haute disponibilité, le système aura plusieurs JobManager.
TaskManager : c'est là que les opérateurs Flink sont exécutés.
Le plug-in Flink est basé sur le plug-in Jolokia de telegraf. Par exemple, pour collecter des informations de tous les composants de Flink, JMX doit être configuré et exposé via Jolokia sur tous les composants.



=== Compatibilité

La configuration a été développée par rapport à la version 1.7.0 de Flink.



=== Configuration



==== Bol d'agent Jolokia

Pour tous les composants individuels, une version du fichier JAR de l'agent Jolokia doit être téléchargée. La version testée sur était link:https://jolokia.org/download.html["Agent de Jolokia 1.6.0"].

Les instructions ci-dessous supposent que le fichier jar téléchargé (jolokia-jvm-1.6.0-agent.jar) est placé sous l'emplacement '/opt/flink/lib/'.



==== JobManager

Pour configurer JobManager de manière à exposer l’API Jolokia, vous pouvez configurer la variable d’environnement suivante sur vos nœuds, puis redémarrer JobManager :

 export FLINK_ENV_JAVA_OPTS="-javaagent:/opt/flink/lib/jolokia-jvm-1.6.0-agent.jar=port=8778,host=0.0.0.0"
Vous pouvez choisir un autre port pour Jolokia (8778). Si vous avez un IP interne pour verrouiller Jolokia sur vous pouvez remplacer le 0.0.0.0 "tout capturer" par votre propre IP. Notez que cette adresse IP doit être accessible à partir du plug-in telegraf.



==== Gestionnaire des tâches

Pour configurer TaskManager(s) pour exposer l’API Jolokia, vous pouvez configurer la variable d’environnement suivante sur vos nœuds, puis redémarrer TaskManager :

 export FLINK_ENV_JAVA_OPTS="-javaagent:/opt/flink/lib/jolokia-jvm-1.6.0-agent.jar=port=8778,host=0.0.0.0"
Vous pouvez choisir un autre port pour Jolokia (8778). Si vous avez un IP interne pour verrouiller Jolokia sur vous pouvez remplacer le 0.0.0.0 "tout capturer" par votre propre IP. Notez que cette adresse IP doit être accessible à partir du plug-in telegraf.



== Objets et compteurs

Les objets suivants et leurs compteurs sont collectés :

[cols="<.<,<.<,<.<,<.<"]
|===
| Objet : | Identifiants : | Attributs : | Points de données : 


| Gestionnaire de tâches Flink | Cluster
Espace de noms
Serveur | Nom du nœud
ID du gestionnaire de tâches
IP du nœud | Segments de mémoire disponibles du réseau
Nombre total de segments de mémoire réseau
Nombre de balayages PS de récupération des données superflues
Temps de balayage de la récupération des données superflues
Nombre de récupération de données superflues sur le PS
Temps de récupération PS Garbage Collection
Mémoire de segment de mémoire validée
Initialisation de la mémoire du tas
Mémoire de tas max
Mémoire de tas utilisée
Démon de nombre de threads
Pic de nombre de threads
Nombre de threads
Nombre total de threads démarrés 


| Travail de cartouche | Cluster
Espace de noms
serveur
ID de la tâche | Nom du nœud
Nom de la tâche
IP du nœud
Dernier chemin externe de point de contrôle
Temps de redémarrage | Ou non
Redémarrage complet
Dernier tampon d'alignement du point de contrôle
Durée du dernier point de contrôle
Taille du dernier point de contrôle
Nombre de points de contrôle terminés
Nombre de points de contrôle ayant échoué
Nombre de points de contrôle en cours
Nombre de points de contrôle
Continuité 


| Gestionnaire des travaux de Flink | Cluster
Espace de noms
Serveur | Nom du nœud
IP du nœud | Nombre de balayages PS de récupération des données superflues
Temps de balayage de la récupération des données superflues
Nombre de récupération de données superflues sur le PS
Temps de récupération PS Garbage Collection
Mémoire de segment de mémoire validée
Initialisation de la mémoire du tas
Mémoire de tas max
Mémoire de tas utilisée
Nombre de gestionnaires de tâches enregistrés
Nombre de travaux en cours d'exécution
Emplacements de tâches disponibles
Nombre total d'emplacements de tâche
Démon de nombre de threads
Pic de nombre de threads
Nombre de threads
Nombre total de threads démarrés 


| Tâche de Flink | Cluster
Espace de noms
ID de la tâche
ID de tâche | Serveur
Nom du nœud
Nom de la tâche
Index des sous-tâches
ID de tentative de tâche
Numéro de tentative de tâche
Nom de la tâche
ID du gestionnaire de tâches
IP du nœud
Filigrane d'entrée actuel | Tampons dans l'utilisation du pool
Tampons dans longueur de la file d'attente
Met en mémoire tampon l'utilisation du pool
Longueur de la file d'attente de sortie de tampon
Nombre de tampons dans local
Nombre de tampons dans le nombre local par seconde
Nombre de tampons dans le débit local par seconde
Nombre de tampons dans Remote
Nombre de tampons dans le nombre de tampons distants par seconde
Nombre de tampons dans le débit à distance par seconde
Nombre de tampons hors
Nombre de tampons en dehors par seconde
Nombre de tampons hors débit par seconde
Nombre d'octets dans local
Nombre d'octets en nombre local par seconde
Nombre d'octets en débit local par seconde
Nombre d'octets dans Remote
Nombre d'octets dans le nombre distant par seconde
Nombre d'octets dans le débit distant par seconde
Nombre d'octets sortant
Nombre d'octets en sortie par seconde
Nombre d'octets en sortie par seconde
Nombre d'enregistrements dans
Nombre d'enregistrements par seconde
Nombre d'enregistrements par seconde
Nombre d'enregistrements sortant
Nombre d'enregistrements en sortie par seconde
Nombre d'enregistrements par seconde 


| Opérateur de tâche Flink | Cluster
Espace de noms
ID de la tâche
ID opérateur
ID de tâche | Serveur
Nom du nœud
Nom de la tâche
Nom de l'opérateur
Index des sous-tâches
ID de tentative de tâche
Numéro de tentative de tâche
Nom de la tâche
ID du gestionnaire de tâches
IP du nœud | Filigrane d'entrée actuel
Filigrane de sortie courant
Nombre d'enregistrements dans
Nombre d'enregistrements par seconde
Nombre d'enregistrements par seconde
Nombre d'enregistrements sortant
Nombre d'enregistrements en sortie par seconde
Nombre d'enregistrements par seconde
Nombre d'enregistrements en retard supprimés
Partitions affectées
Débit en octets consommés
Latence de validation moyenne
Latence d'engagement max
Taux de validation
Les validations ont échoué
Validations réussies
Taux de fermeture de la connexion
Nombre de connexions
Taux de création de la connexion
Nombre
Latence de récupération moyenne
Latence max. De récupération
Débit de récupération
Taille d'extraction moyenne
Taille d'extraction max
Récupérer temps d'accélération moy
Récupérer le temps d'accélération max
Fréquence de pulsation
Débit d'octets entrants
Ratio d'E/S.
Temps d'E/S moyen (ns)
Ratio d'attente d'E/S.
Temps d'attente moyen ES (ns)
Taux de participation
Temps de liaison moy
Dernier battement de cœur il y a
Débit d'E/S du réseau
Débit d'octets sortants
Enregistre le taux de consommation
Délai d'enregistrement max
Nombre moyen d'enregistrements par demande
Taux de demande
Taille moyenne de la demande
Taille max. De la demande
Taux de réponse
Sélectionnez taux
Taux de synchronisation
Temps de synchronisation moyen
Temps de réponse de pulsation max
Temps de jointure max
Temps de synchronisation max 
|===


== Dépannage

Pour plus d'informations, consultez le link:concept_requesting_support.html["Assistance"] page.
