---
sidebar: sidebar 
permalink: task_config_telegraf_docker.html 
keywords: telegraf, installation, install, docker 
summary: Configuration du collecteur de données Docker 
---
= Collecteur de données Docker
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Cloud Insights utilise ce collecteur de données pour collecter des metrics à partir de Docker.



== Installation

. Dans *observabilité > Collectors*, cliquez sur *+Data Collector*. Choisissez Docker.
+
Si vous n'avez pas configuré un agent pour la collecte, vous êtes invité à le faire link:task_config_telegraf_agent.html["installez un agent"] dans votre environnement.

+
Si un agent est déjà configuré, sélectionnez le système d'exploitation ou la plate-forme approprié et cliquez sur *Continuer*.

. Suivez les instructions de l'écran de configuration de Docker pour configurer le collecteur de données. Les instructions varient en fonction du type de système d'exploitation ou de plate-forme utilisé pour collecter des données.


image:DockerDCConfigLinux.png["Configuration Docker"]



== Configuration

Le plug-in d’entrée Telegraf pour Docker collecte des mesures via une socket UNIX ou un noeud final TCP spécifié.



=== Compatibilité

La configuration a été développée à partir de la version 1.12.6 de Docker.



=== Configuration



=== Accès à Docker via un socket UNIX

Si l'agent Telegraf s'exécute sur une base sans système d'exploitation, ajoutez l'utilisateur telegraf Unix au groupe docker Unix en exécutant ce qui suit :

 sudo usermod -aG docker telegraf
Si l'agent Telegraf s'exécute dans un pod Kubernetes, exposez le socket Docker Unix en effectuant le mappage du socket dans le pod en tant que volume, puis en le montant dans /var/run/docker.Sock.  Par exemple, ajoutez ce qui suit à PodSpec :

[listing]
----
volumes:
...
- name: docker-sock
hostPath:
path: /var/run/docker.sock
type: File
----
Ajoutez ensuite les éléments suivants au conteneur :

[listing]
----
volumeMounts:
...
- name: docker-sock
mountPath: /var/run/docker.sock
----
Notez que le programme d'installation Cloud Insights fourni pour la plateforme Kubernetes s'occupe automatiquement de ce mappage.



=== Accès à Docker via un terminal TCP

Par défaut, Docker utilise le port 2375 pour un accès non chiffré et le port 2376 pour un accès crypté.



== Objets et compteurs

Les objets suivants et leurs compteurs sont collectés :

[cols="<.<,<.<,<.<,<.<"]
|===
| Objet : | Identifiants : | Attributs : | Points de données : 


| Moteur Docker | Espace de noms
Moteur Docker | Nom du nœud
IP du nœud
UUID de nœud
OS de nœud
Cluster Kubernetes
Version de Docker
Unité | Mémoire
Conteneurs
Conteneurs en pause
Conteneurs en cours d'exécution
Conteneurs arrêtés
Processeurs
Les routines Go
Images
Événements d'écoute
Descripteurs de fichiers utilisés
Données disponibles
Total des données
Données utilisées
Métadonnées disponibles
Total des métadonnées
Métadonnées utilisées
Taille de bloc du pool 


| Conteneur Docker | Espace de noms
Nom du conteneur
Moteur Docker | Hachage en conteneurs Kubernetes
Ports pour conteneurs Kubernetes
Nombre de redémarrages du conteneur Kubernetes
Chemin du message de fin du conteneur Kubernetes
Règle de message de fin de conteneur Kubernetes
Délai de grâce de résiliation du pod Kubernetes
Image de conteneur
État du conteneur
Version du conteneur
Nom du nœud
Chemin du journal du conteneur Kubernetes
Nom du conteneur Kubernetes
Kubernetes Docker Type
Nom du pod Kubernetes
Namespace du pod Kubernetes
UID de pod Kubernetes
ID du sandbox Kubernetes
IP du nœud
UUID de nœud
Version de Docker
Config. D'E/S Kubernetes affichée
Source de configuration d'E/S Kubernetes
OpenShift IO SCC
Description du Kubernetes
Nom d'affichage Kubernetes
Balises OpenShift
Service Kompose
Hachage de modèle de pod
Hachage de révision du contrôleur
Génération de modèle de pod
Licence
Date de création du schéma
Licence de schéma
Nom du schéma
URL du schéma
URL VCS du schéma
Fournisseur de schéma
Version du schéma
Version du schéma
Agent d'entretien
Pod client
Nom du pod Kubernetes StatefulSet
Locataire
Console Web
Architecture
URL source autoritaire
Date de fabrication
Hôte de construction RH
Composant RH
Étendue de la distribution
Installer
Relâchez
Courez
Récapitulatif
Désinstaller
Réf. VCS
Type VCS
Fournisseur
Version
État de santé
ID du conteneur | Mémoire active anonyme
Mémoire fichier actif
Mémoire cache
Limite hiérarchique de mémoire
Mémoire inactive Anonyme
Mémoire fichier inactif
Limite de mémoire
Fichier mappé en mémoire
Utilisation maximale de la mémoire
Erreur de page mémoire
Erreur majeure de la page mémoire
Mémoire paginée dans
Mémoire saturée
Taille de l'ensemble résident mémoire
Mémoire Resident Set taille énorme
Mémoire totale Active Anonyme
Mémoire totale du fichier actif
Mémoire cache totale
Mémoire totale inactive Anonyme
Mémoire totale du fichier inactif
Mémoire totale du fichier mappé
Erreur de mémoire totale de la page
Erreur majeure de la page Total de la mémoire
Mémoire totale paginée po
Mémoire totale paginée
Mémoire taille totale de l'ensemble résident
Mémoire Total Resident Set taille énorme
Mémoire totale non supprimée
Suppression de la mémoire
Utilisation de la mémoire
Pourcentage d'utilisation de la mémoire
Code de sortie
MOO tué
PID
Commencé à
Problème de striak 


| Les E/S de bloc de conteneur Docker | Espace de noms
Nom du conteneur
Périphérique
Moteur Docker | Hachage en conteneurs Kubernetes
Ports pour conteneurs Kubernetes
Nombre de redémarrages du conteneur Kubernetes
Chemin du message de fin du conteneur Kubernetes
Règle de message de fin de conteneur Kubernetes
Délai de grâce de résiliation du pod Kubernetes
Image de conteneur
État du conteneur
Version du conteneur
Nom du nœud
Chemin du journal du conteneur Kubernetes
Nom du conteneur Kubernetes
Kubernetes Docker Type
Nom du pod Kubernetes
Namespace du pod Kubernetes
UID de pod Kubernetes
ID du sandbox Kubernetes
IP du nœud
UUID de nœud
Version de Docker
Config Kubernetes affichée
Source de configuration Kubernetes
OpenShift SCC
Description du Kubernetes
Nom d'affichage Kubernetes
Balises OpenShift
Version du schéma
Hachage de modèle de pod
Hachage de révision du contrôleur
Génération de modèle de pod
Service Kompose
Date de création du schéma
Licence de schéma
Nom du schéma
Fournisseur de schéma
Pod client
Nom du pod Kubernetes StatefulSet
Locataire
Console Web
Date de fabrication
Licence
Fournisseur
Architecture
URL source autoritaire
Hôte de construction RH
Composant RH
Étendue de la distribution
Installer
Agent d'entretien
Relâchez
Courez
Récapitulatif
Désinstaller
Réf. VCS
Type VCS
Version
URL du schéma
URL VCS du schéma
Version du schéma
ID du conteneur | Octets de service d'E/S Recursive Async
Octets de service d'E/S - lecture récursive
IO Service Bytes Recursive Sync
Total des octets de service d'E/S récursifs
Octets de service d'E/S - écriture récursive
IO Serviced Recursive Async
Lecture récursive IO Serviced
IO Serviced Recursive Sync
Total recursive IO Serviced
Écriture récursive avec service d'E/S. 


| Réseau de conteneurs Docker | Espace de noms
Nom du conteneur
Le réseau
Moteur Docker | Image de conteneur
État du conteneur
Version du conteneur
Nom du nœud
IP du nœud
UUID de nœud
OS de nœud
Cluster K8s
Version de Docker
ID du conteneur | RX abandonné
Octets RX
Erreurs RX
Paquets RX
TX abandonné
Octets TX
Erreurs de transmission
Paquets TX 


| Processeur du conteneur Docker | Espace de noms
Nom du conteneur
CPU
Moteur Docker | Hachage en conteneurs Kubernetes
Ports pour conteneurs Kubernetes
Nombre de redémarrages du conteneur Kubernetes
Chemin du message de fin du conteneur Kubernetes
Règle de message de fin de conteneur Kubernetes
Délai de grâce de résiliation du pod Kubernetes
Config Kubernetes affichée
Source de configuration Kubernetes
OpenShift SCC
Image de conteneur
État du conteneur
Version du conteneur
Nom du nœud
Chemin du journal du conteneur Kubernetes
Nom du conteneur Kubernetes
Kubernetes Docker Type
Nom du pod Kubernetes
Namespace du pod Kubernetes
UID de pod Kubernetes
ID du sandbox Kubernetes
IP du nœud
UUID de nœud
OS de nœud
Cluster Kubernetes
Version de Docker
Description du Kubernetes
Nom d'affichage Kubernetes
Balises OpenShift
Version du schéma
Hachage de modèle de pod
Hachage de révision du contrôleur
Génération de modèle de pod
Service Kompose
Date de création du schéma
Licence de schéma
Nom du schéma
Fournisseur de schéma
Pod client
Nom du pod Kubernetes StatefulSet
Locataire
Console Web
Date de fabrication
Licence
Fournisseur
Architecture
URL source autoritaire
Hôte de construction RH
Composant RH
Étendue de la distribution
Installer
Agent d'entretien
Relâchez
Courez
Récapitulatif
Désinstaller
Réf. VCS
Type VCS
Version
URL du schéma
URL VCS du schéma
Version du schéma
ID du conteneur | Périodes de restriction
Limitation des périodes restreintes
Temps d'accélération de la régulation
Utilisation en mode noyau
Utilisation en mode utilisateur
Pourcentage d'utilisation
Système d'utilisation
Total d'utilisation 
|===


== Dépannage

[cols="2*"]
|===
| Problème : | Essayer : 


| Je ne vois pas mes mesures Docker dans Cloud Insights après les instructions de la page de configuration. | Vérifiez les journaux de l’agent Telegraf pour voir s’il signale l’erreur suivante :

 E ! Erreur dans le plug-in [inputs.docker] : autorisation refusée lors de la tentative de connexion au socket du démon Docker

Si c'est le cas, prenez les mesures nécessaires pour fournir à l'agent Telegraf l'accès au socket Docker Unix comme spécifié ci-dessus. 
|===
Pour plus d'informations, consultez le link:concept_requesting_support.html["Assistance"] page.
